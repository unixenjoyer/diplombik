{% extends "base.html" %}

{% block content %}
<section class="admin-section">
  <h2><i class="icon-user"></i> –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>

  <div class="card employee-list">
    <h3><i class="icon-team"></i> –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h3>

    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–õ–æ–≥–∏–Ω</th>
            <th>–°—Ç–∞–≤–∫–∞ (‚ÇΩ/—á–∞—Å)</th>
            <th>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          {% for employee in employees %}
          <tr>
            <td>{{ employee.id }}</td>
            <td>{{ employee.username }}</td>
            <td>
              <form action="{{ url_for('update_rate', employee_id=employee.id) }}" method="POST" class="rate-form">
                <input type="number" name="hourly_rate" value="{{ "%.2f"|format(employee.hourly_rate) }}"
                      step="0.01" min="0" class="rate-input">
                <button type="submit" class="btn btn-small btn-update">
                  <i class="icon-update"></i> –û–±–Ω–æ–≤–∏—Ç—å
                </button>
              </form>
            </td>
            <td>{{ "%.2f"|format(employee.total_earned) }} ‚ÇΩ</td>
            <td>
              <form action="{{ url_for('delete_employee', employee_id=employee.id) }}" method="POST"
                    onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ {{ employee.username }}?')">
                <button type="submit" class="btn btn-danger">
                  <i class="icon-delete"></i> –£–¥–∞–ª–∏—Ç—å
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="card add-employee">
    <h3><i class="icon-add"></i> –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h3>

    <form method="POST" action="{{ url_for('add_employee') }}">
      <div class="form-group">
        <input type="text" name="username" placeholder="–õ–æ–≥–∏–Ω" required class="form-control">
      </div>
      <div class="form-group">
        <input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å" required class="form-control">
      </div>
      <div class="form-group">
        <input type="number" name="hourly_rate" placeholder="–°—Ç–∞–≤–∫–∞ (—Ä—É–±/—á–∞—Å)" step="0.01" min="0" required class="form-control">
      </div>
      <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>
  </div>
</section>

<style>
.admin-section {
  padding: 1.5rem 0;
}

.rate-form {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.rate-input {
  width: 80px;
  padding: 0.3rem;
  border-radius: 4px;
  border: 1px solid var(--border);
  background-color: var(--bg);
  color: var(--text);
}

.btn-small {
  padding: 0.3rem 0.6rem;
  font-size: 0.8rem;
}

.btn-update {
  background-color: var(--primary);
  transition: all 0.2s;
}

.btn-update:hover {
  transform: scale(1.05);
  opacity: 0.9;
}

.icon-user:before { content: "üë§"; }
.icon-team:before { content: "üë•"; }
.icon-add:before { content: "‚ûï"; }
.icon-delete:before { content: "üóëÔ∏è"; }
.icon-update:before { content: "üîÑ"; }
</style>
{% endblock %}